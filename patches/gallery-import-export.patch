--- a/gallery.js
+++ b/gallery.js
@@
 (async function init() {
@@
   chrome.storage.onChanged.addListener((changes, area) => {
     if (area === "local" && changes.items) {
       items = changes.items.newValue || [];
       renderAll();
     }
   });

   // Initialise import/export buttons if they exist in the gallery HTML.
   // These elements are optional â€“ if you add buttons with the IDs
   // `export-btn` and `import-btn` to your gallery.html, this code will
   // enable exporting and importing of bookmarks.  Export will download
   // the current bookmark list as a JSON file.  Import will merge the
   // selected file into your local storage.
   const exportBtn = document.getElementById('export-btn');
   const importInput = document.getElementById('import-btn');
   if (exportBtn) {
     exportBtn.addEventListener('click', async () => {
       const data = await chrome.storage.local.get({ items: [] });
       const blob = new Blob([JSON.stringify(data.items, null, 2)], { type: 'application/json' });
       const url = URL.createObjectURL(blob);
       const a = document.createElement('a');
       a.href = url;
       a.download = 'mediamarks-backup.json';
       a.style.display = 'none';
       document.body.appendChild(a);
       a.click();
       document.body.removeChild(a);
       URL.revokeObjectURL(url);
     });
   }
   if (importInput) {
     importInput.addEventListener('change', async (event) => {
       const file = event.target.files[0];
       if (!file) return;
       const text = await file.text();
       try {
         const imported = JSON.parse(text);
         if (!Array.isArray(imported)) {
           alert('Imported file does not contain an array of bookmarks.');
           return;
         }
         const data = await chrome.storage.local.get({ items: [] });
         const localItems = data.items;
         let changed = false;
         imported.forEach(item => {
           if (!localItems.some(x => x.id === item.id)) {
             localItems.push(item);
             changed = true;
           }
         });
         if (changed) {
           await chrome.storage.local.set({ items: localItems });
           renderAll();
         }
         event.target.value = '';
         alert(`${imported.length} bookmarks imported`);
       } catch (err) {
         console.error(err);
         alert('Failed to import bookmarks: ' + err.message);
       }
     });
   }